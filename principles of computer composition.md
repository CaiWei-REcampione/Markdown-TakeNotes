# 计算机系统概述

## 计算机发展历程

### 计算机硬件发展

*    第一代计算机——电子管时代
*    第二代计算机——晶体管时代
*    第三代计算机——中小规模集成电路时代
*    第四代计算机——超大规模集成电路时代
*    第五代计算机——智能计算机
*    第六代计算机——生物计算机与量子计算机

### 计算机分类

*    单指令流单数据流(SISD)——冯诺依曼体系结构
*    单指令流多数据流(SIMD)——阵列处理器和向量处理器系统
*    多指令流单数据流(MISD)——这种计算机不存在
*    多指令流多数据流(MIMD)——多处理器和多计算机系统

## 计算机系统层次结构

### 计算机系统基本组成

*    由软件和硬件两部分构成

### 计算机硬件的基本组成

*    存储器、运算器、控制器、输入设备和输出设备组成

     *    运算器+控制器=CPU
     *    CPU+主存储器=主机

*    存储器

     *    储存器分为主存储器和辅助存储器

          | 储存的概念类 |                             说明                             |
          | :----------: | :----------------------------------------------------------: |
          |    储存元    |       可称为存储元件和存储基元，用来存放一位二进制信息       |
          |   存储单元   |           由若干个存储元组成，能存放多位二进制信息           |
          |    存储体    |                   许多存储单元可组成存储体                   |
          |    存储字    | 每个存储单元中二进制代码的组合即为存储字，可代表数值、指令和地址等 |
          |   存储字长   |          每个存储单元中二进制代码的位数就是存储字长          |

     *    主存储器由许多存储单元组成，每个存储单元包括多个存储元，每个存储元存储一位二进制代码“0”或“1”

     *    存储体用于存放二进制信息，地址存储器（MAR)存放存放访存地址,经过地址译码器译码后找到所选的存储单元

*    运算器

     *    运算器是对信息进行处理和运算的部件,主要功能是进行算术和逻辑运算,其核心是算术逻辑单元(ALU)
          *    算术运算包括：加、减、乘、除
          *    逻辑运算包括：与、或、非、异或、比较、移位
     *    运算器包括累加器(ACC)、乘商寄存器(MQ)、操作数寄存器(X)、变址寄存器(IX)、基址寄存器(BR)等,其中前三个寄存器必须有

*    控制器

     *    <u>*区分存储单元中存放的是指令还是数据*</u>
     *    计算机有两种信息在流动
          *    控制信息
          *    数据信息
     *    控制器由程序计数器(PC)、指令寄存器(IR)和控制单元(CU)组成
     *    PC用力啊存放当前预执行指令的地址,可以自动+1形成下一条指令的地址,它与主存的MAR之间有一条直接通路
     *    IR用来存放当前的指令,其内容来自主存的MDR
     *    指令中的操作码字段OP(IR)送至CU,用以分析指令并发出各种微操作命令序列;指令中的地址码字段Ad(IR)送往MAR来取操作数
     *    CPU可以判断在取指阶段访问存储器取出的二进制代码是指令,而在执行阶段访问存储器取出的二进制代码是数据
     
*    输入设备

     *    输入设备是将人们熟悉的信息形式转换成计算机可以接受并识别的信息形式
     
*    输出设备

     *    输出设备可将二进制信息转换成人类或其他设备可以接收或识别的信息

*    冯诺依曼计算机特点

     *    计算机由运算器、存储器、控制器、输入设备和输出设备五大部件组成
     *    指令和数据以同等地位保存于存储器内，并可按地址访问存储器
     *    指令和数据均用于二进制代码表示
     *    指令由操作码和地址码组成，操作码用来表示操作的性质，地址码用来表示操作数在存储器中的位置
     *    指令在存储器内按顺序存放，通常指令是顺序执行的，在特定条件下，可根据运算结果或设定的条件改变执行顺序
     *    机器以运算器为中心，输入/输出设备与存储器之间的数据传送通过运算器完成

*    五大部件之间的关系

     1.   通过与控制器之间的信号请求,输入设备首先输入信息(*<u>数据和程序</u>*)给存储器
     2.   控制器调用相应的指令来运行程序,然后发出相应的操作命令给运算器,控制器给出操作数的地址,使用该地址从存储器调用操作数给运算器进行运算
     3.   运算结果返回给存储器

### 计算机软件的分类

*    系统软件
     *    管理整个计算机系统,使系统资源得到合理的调度,高效运行
*    应用软件
     *    根据任务需要所编写的各种程序
*    计算机编程语言
     *    机器语言
          *    二进制代码"0"或"1"描述不同的指令
          *    <u>*计算机硬件能够直接执行*</u>
     *    汇编语言
          *    直接对硬件进行操作
     *    高级语言
          *    需要经过编译程序编译成汇编语言程序,然后经过汇编操作得到机器语言程序

## 计算机系统的层次结构

*    第1级
     *    微程序机器级
          *    微指令由硬件直接执行
*    第2级
     *    传统机器级
          *    用微程序解释机器指令系统
*    第3级
     *    操作系统级
          *    用机器语言程序解释作业控制语句
*    第4级
     *    汇编语言机器级
          *    用汇编程序翻译成机器语言程序
*    第5级
     *    高级语言机器级
          *    用编译程序翻译成汇编程序或直接翻译成机器语言

## 机器性能指标

### 吞吐量

信息流入、处理和流出系统的速率

吞吐量主要取决于主存的存取周期

### 响应时间

从提交作业到该作业得到CPU相应所经历的时间。相应时间越短,吞吐量越大

### 主频

机器内部主时钟的频率,是衡量机器速度的重要参数,单位为Hz、MHz

### CPU周期

又称为机器周期，通常用从内存读取一条指令字的最短时间来定义

### CPU时钟周期

主频的倒数,是CPU中最小的时间单位

### CPI、MIPS和FLOPS

| CPI   | 执行一条指令所需要的时钟周期数 |
| ----- | ------------------------------ |
| MIPS  | 每秒可执行百万条指令数         |
| FLOPS | 每秒执行的浮点运算次数         |

# 数据的表示和运算

## 数制与编码

### 进位计数器及其相互转换

*    二进制——Binary
*    八进制——Octal
*    十进制——Decimalism
*    十六进制——Hexadecimal

#### 计算机内部为什么用二进制来编码所有信息

*    二进制系统只有两个基本符号:"0"、"1",基本符号少,易于稳态电路实现
*    二进制的编码、计数、运算等的规则简单
*    二进制中的"0"和"1"与逻辑命题的"真"和"假"的对应关系简单

### 真值和机器数

### BCD码

#### 8421码

使用四位二进制数来表示一位十进制数"0"~"9",二进制数位的权重为8、4、2、1

#### 余3码

在8421码的基础上，加上十进制数3形成的，因而成为余3码

#### 2421码

有权码,最高位权重为2而不是8

### 字符和字符串

#### 字符编码ASCII码

| A    | 65   |
| ---- | ---- |
| a    | 97   |
| 0    | 48   |

#### 汉字编码

#### 字符串大小端存放

### 校验码

检错编码

#### 奇偶校验码

奇校验

​	添加一位检验码后,使得整个码字里面1的个数为奇数;接收端收到数据后就校验数据里1的个数,如果正好为奇数,则认为传输没有出错;如果检测到偶数个1,则说明传输过程中,数据发生了改变,要求重发

偶校验

​	添加一位检验码后,使得整个码字里面1的个数为偶数;接收端收到数据后就校验数据里1的个数,如果正好为偶数,则认为传输没有出错;如果检测到奇数个1,则说明传输过程中,数据发生了改变,要求重发

#### 循环冗余校验码(CRC)

M(x)代表发送信息的多项式,G(x)为生成多项式,代表校验位信息

1.   写出M(x)和G(x)所代表的二进制码
2.   将M(x)所代表的二进制码左移G(x)的最高次数
3.   做模二除得到余数,将其与被除数合并得到循环冗余码

#### 海明码

1.   确定校验码的位数r
     $$
     2^r-1\geq k+r
     $$
     
2.   确定校验码的位置

3.   确定数据的位置

4.   求出校验位的值

*    如果要检测d位错误,那么需要一个海明距为d+1的编码方案
*    如果要纠正d位错误,那么需要一个海明距为2d+1的编码方案

## 定点数的表示和运算

### 定点数的表示

#### 无符号数的表示

相当于数的绝对值

#### 有符号数的表示

有符号数需要将其符号数字化,"0"表示正号,"1"表示负号

##### 原码、补码、反码

*    真值为正数时,原码、补码和反码的表示形式均相同,即符号位用"0"表示,数值部分与真值相同
*    *<u>真值为负数时,符号位都用"1"表示,数值位的关系是补码是原码的"每位求反加1",反码是原码的"每位求反</u>"*

#### 无符号数和有符号数的范围区别

​	最高位的权值最高,仅仅少了一位,最大值立即减半

#### 移码

​	移码就是补码的符号位取反

​	"0"的补码形式是唯一的,既然移码是补码的符号位取反,因此可以得出"0"的移码表示也是唯一的

### 定点数的运算

#### 采用原码

#### 采用补码

​	无论机器字长是多少,-1的补码永远是全"1"

​	最小负数的补码永远是首位为1,后面全"0"

​	补码比原码多表示一位数

#### 采用反码

##### 定点数的移位运算

​	当某个十进制数相对于小数点做n位左移时,相当于该数乘以10的n次方;右移n位时,相当于该数除以10的n次方

###### 逻辑移位

​	逻辑左移,高位移丢,低位补0

​	逻辑右移,低位移丢,高位填零

###### 算术移位

*    当机器数为正时
     *    原码:左移右移都补0
     *    补码:左移右移都补0
     *    反码:左移右移都补0
*    当机器数为负时
     *    原码:由于复数原码的数值部分与真值相同,因此在移位时只要使符号位不变,其空位添加0即可
     *    反码:由于负数的反码各位与负数的原码正好相反,因此移位后所添加的代码应与原码相反,即全部填1
     *    补码:负数补码左移时,添加补码的代码应该与原码相同,即补0;党负数补码右移时,空位出现在高位,故添加的补码应该与反码相同,即补1

## 算术逻辑单元

### 串行加法器和并行加法器

### 串行加法器

​	两个操作数分别放在来了改革移位寄存器中,并且由移位寄存器从低位到高位串行提供操作数进行相加

### 并行加法器

### 算术逻辑单元的功能和结构

​	组合逻辑电路在逻辑功能上的特点是任意时刻的输出仅仅取决于该时刻的输入,与电路原来的状态无关

​	时序逻辑电路在逻辑功能上的特点是任意时刻的输出不仅仅取决于方式的输入信号,还取决于电路原来的状态

​		时序逻辑电路具有记忆元件,即触发器,可以记录前一时刻的输出状态

ALU是一种组合逻辑电路,英才在实际使用ALU时,其输入端口A和B必须与锁存器相连,而且在运算过从中锁存器的内容是不变的,其输出也必须送至寄存器保存

#### 正逻辑

​	门电路的输入、输出电压的高电平定义为逻辑"1",低电平定义为逻辑"0",则是正逻辑

​	门电路的输入、输出电压的高电平定义为逻辑"1",低电平定义为逻辑"1",则是负逻辑

​	数字系统设计中,不是采用正逻辑就是采用负逻辑,不能混合使用

